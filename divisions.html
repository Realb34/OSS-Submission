<!DOCTYPE html>
<html lang="en" id="top">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OSS – Divisions</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="OSS (Open Submission Series) divisions: skill tiers, age groups, and team formats with filters, search, and a division finder." />
  <style>
    /* ===== CSS VARIABLES (Dark Theme) ===== */
    :root{
      --bg: #0c0d10;
      --surface: #111218;
      --surface-2: #171923;
      --text: #e7e9ee;
      --muted: #a1a6b3;
      --accent: #e05024;
      --accent-2: #fff68d;
      --border: #1f2330;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --focus: 0 0 0 3px rgba(122,162,255,.35);
      --radius: 0px; /* square look */
      --container: 1100px;
      --hero-image: url('https://i.imgur.com/Z3bqzqu.jpeg');
      --good: #27ae60;
      --warn: #f39c12;
    }
    @media (prefers-color-scheme: light) {
      :root{ --bg:#f7f8fa; --surface:#ffffff; --surface-2:#f3f5f9; --text:#0f1220; --muted:#4b5160; --border:#e7eaf2; --shadow:0 10px 25px rgba(0,0,0,.08); --focus:0 0 0 3px rgba(62,115,255,.25); --good:#1e874b; --warn:#c57f0e; }
    }

    /* ===== BASE ===== */
    *,*::before,*::after{ box-sizing: border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0; background:var(--bg); color:var(--text);
      font: 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{ color:var(--text); text-decoration:none; }
    img{ max-width:100%; display:block; }
    .container{ max-width:var(--container); margin-inline:auto; padding: 0 20px; }

    /* ===== NAV ===== */
    .topbar{ position:sticky; top:0; z-index:1000; background:var(--surface); border-bottom:1px solid var(--border); box-shadow: var(--shadow); }
    .nav{ display:flex; align-items:center; justify-content:space-between; height:64px; gap:16px; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .brand img{ width:36px; height:36px; border-radius: var(--radius); background:#000; box-shadow: var(--shadow); }
    .brand span{ font-weight:600; letter-spacing:.2px; }

    .nav-links{ position:relative; display:flex; gap:18px; align-items:center; transition: height .25s ease; }
    .nav-link, .dropdown-toggle{ padding:8px 10px; border-radius: var(--radius); color:var(--muted); background:none; border:none; font:inherit; cursor:pointer; }
    .nav-link:hover, .nav-link:focus,
    .dropdown-toggle:hover, .dropdown-toggle:focus{ color:var(--text); outline:none; }
    .nav-link::after, .dropdown-toggle::after{ content:""; display:block; height:2px; margin-top:6px; width:0; background:linear-gradient(90deg,var(--accent),var(--accent-2)); transition: width .25s ease; }
    .nav-link:hover::after, .nav-link:focus-visible::after,
    .dropdown-toggle:hover::after, .dropdown-toggle:focus-visible::after{ width:100%; }
    .nav-link[aria-current="page"]{ color:var(--text); }

    .burger{ display:none; background:transparent; border:1px solid var(--border); border-radius: var(--radius); width:40px; height:40px; align-items:center; justify-content:center; color:var(--text); }
    .burger:focus-visible{ outline: none; box-shadow: var(--focus); }
    .burger svg{ width:22px; height:22px; }

    /* Dropdown */
    .dropdown{ position:relative; }
    .dropdown-toggle{ display:flex; align-items:center; gap:8px; }
    .caret{ display:inline-block; width:0; height:0; border-left:5px solid transparent; border-right:5px solid transparent; border-top:6px solid var(--muted); transition: transform .2s ease, border-top-color .2s ease; }
    .dropdown[aria-expanded="true"] .caret{ transform: rotate(180deg); border-top-color: var(--text); }

    .dropdown-menu{ position:absolute; right:0; top:calc(100% + 8px); background:var(--surface-2); border:1px solid var(--border); box-shadow: var(--shadow); border-radius: var(--radius); min-width: 220px; padding:6px; display:none; }
    .dropdown-menu a{ display:block; padding:10px; border-radius: var(--radius); color:var(--text); }
    .dropdown-menu a:hover, .dropdown-menu a:focus{ background: rgba(255,255,255,.04); outline:none; }

    @media (hover:hover){ .dropdown:hover .dropdown-menu{ display:block; } }

    /* Mobile layout */
    @media (max-width: 820px){
      .burger{ display:inline-flex; }
      .nav-links{ position:absolute; left:0; right:0; top:64px; background:var(--surface); border-bottom:1px solid var(--border); flex-direction:column; align-items:flex-start; padding:12px 20px; height:0; overflow:hidden; }
      .nav-links.open{ height:auto; }
      .nav-link, .dropdown-toggle{ width:100%; text-align:left; padding:12px 6px; }
      .dropdown-menu{ position:static; display:none; margin:2px 0 8px 0; width:100%; }
      .dropdown.open .dropdown-menu{ display:block; }
    }

    /* ===== HERO ===== */
    .hero{ position:relative; min-height:48vh; display:grid; place-items:center; isolation:isolate; background: #000; overflow:hidden; }
    .hero::before{ content:""; position:absolute; inset:0; background-image: var(--hero-image); background-size: cover; background-position:center; filter: brightness(.45) saturate(.9); transform: scale(1.05); transition: transform 6s ease; z-index:-2; }
    .hero::after{ content:""; position:absolute; inset:0; z-index:-1; background: radial-gradient(1200px 400px at 60% 10%, transparent 20%, rgba(0,0,0,.4) 55%, rgba(0,0,0,.75) 100%), linear-gradient(180deg, rgba(0,0,0,.3), rgba(0,0,0,.6)); }
    .hero:hover::before{ transform: scale(1.1); }
    .hero-inner{ text-align:center; padding:72px 20px; }
    .eyebrow{ color:var(--muted); letter-spacing:.25em; text-transform:uppercase; font-size:12px; }
    .hero h1{ margin:.35em 0 .6em; font-size: clamp(28px, 6vw, 56px); line-height:1.1; letter-spacing:.2px; }
    .btn{ display:inline-block; padding:12px 18px; font-weight:600; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#0b0e13; border:0; border-radius: var(--radius); box-shadow: var(--shadow); transform: translateZ(0); transition: transform .15s ease, filter .25s ease, opacity .25s ease; }
    .btn:hover{ transform: translateY(-1px); filter: saturate(1.1); }
    .btn:active{ transform: translateY(0); }
    .btn:focus-visible{ outline:none; box-shadow: var(--focus); }

    /* ===== SECTION HEADER ===== */
    section{ padding: 72px 0; }
    .section-head{ text-align:center; }
    .subtitle{ color:var(--muted); letter-spacing:.35em; text-transform:uppercase; font-size:12px; margin-bottom:10px; }
    .title{ font-size: clamp(24px, 5vw, 44px); line-height:1.15; margin:0 auto 6px; }
    .lead{ color:var(--muted); margin:0 auto; max-width: 780px; }

    /* ===== FILTERS & GRID ===== */
    .toolbar{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin: 24px 0 12px; }
    .search{ flex: 1 1 280px; display:flex; align-items:center; gap:10px; background:var(--surface-2); border:1px solid var(--border); border-radius: var(--radius); padding:8px 12px; }
    .search input{ flex:1; background:transparent; border:0; color:var(--text); outline:none; font:inherit; }

    .filters{ display:flex; gap:8px; flex-wrap:wrap; margin: 4px 0 8px; }
    .filter{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid var(--border); border-radius: 999px; color:var(--muted); background:transparent; cursor:pointer; font-size:13px; }
    .filter[aria-pressed="true"]{ color:#0b0e13; background:linear-gradient(90deg,var(--accent),var(--accent-2)); border-color: transparent; }
    .count{ color:var(--muted); font-size:12px; margin-left:auto; }

    .grid{ display:grid; gap:14px; grid-template-columns: repeat(3, 1fr); }
    @media (max-width: 1100px){ .grid{ grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 720px){ .grid{ grid-template-columns: 1fr; } }

    .card{ background:var(--surface-2); border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); overflow:hidden; display:flex; flex-direction:column; }
    .card header{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 16px; border-bottom:1px solid var(--border); background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.02)); }
    .card h3{ margin:0; font-size: 16px; letter-spacing:.2px; }
    .tags{ display:flex; gap:6px; flex-wrap:wrap; }
    .pill{ display:inline-block; font-size:12px; padding:4px 10px; border:1px solid var(--border); border-radius: 999px; color:var(--muted); }
    .pill.good{ color:#fff; background: var(--good); border-color: transparent; }
    .pill.warn{ color:#0b0e13; background: var(--accent-2); border-color: transparent; }

    .body{ padding:14px 16px; display:grid; gap:8px; }
    .meta{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; font-size:14px; color:var(--muted); }
    @media (max-width: 520px){ .meta{ grid-template-columns: 1fr; } }

    .actions{ margin-top:auto; padding:14px 16px; display:flex; align-items:center; gap:10px; border-top:1px solid var(--border); }
    .btn-ghost{ padding:8px 12px; font-weight:600; background:transparent; color:var(--text); border:1px solid var(--border); border-radius: var(--radius); cursor:pointer; }
    .btn-ghost:focus-visible{ outline:none; box-shadow: var(--focus); }

    /* ===== FINDER & COMPARE ===== */
    .finder{ display:grid; gap:14px; grid-template-columns: 2fr 1fr; margin-top: 28px; }
    @media (max-width: 980px){ .finder{ grid-template-columns: 1fr; } }

    .form-row{ display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; }
    @media (max-width: 720px){ .form-row{ grid-template-columns: 1fr; } }
    .field{ display:flex; flex-direction:column; gap:6px; }
    .field label{ font-size:12px; text-transform:uppercase; letter-spacing:.08em; color:var(--muted); }
    .field input, .field select{ background:var(--surface); color:var(--text); border:1px solid var(--border); border-radius: var(--radius); padding:10px 12px; }

    .compare-table{ width:100%; border-collapse:collapse; }
    .compare-table th, .compare-table td{ padding: 10px 12px; text-align:left; border-bottom:1px solid var(--border); }
    .compare-table th{ color:var(--muted); font-weight:600; font-size: 12px; letter-spacing:.08em; text-transform:uppercase; }

    /* ===== FOOTER ===== */
    footer{ background:var(--surface); border-top:1px solid var(--border); margin-top: 64px; padding-left: 10px; }
    .footer-grid{ display:grid; gap:18px; grid-template-columns: 2fr 1fr 1fr; padding: 28px 0; }
    @media (max-width: 820px){ .footer-grid{ grid-template-columns: 1fr; } }
    .copyright{ border-top:1px solid var(--border); padding: 14px 0; color:var(--muted); font-size:14px; }
    .footer-col h4{ margin:0 0 10px; font-size:14px; text-transform:uppercase; letter-spacing:.15em; color:var(--muted); }
    .footer-col a{ color:var(--text); display:block; padding:6px 0; }
    .footer-col a:hover{ opacity:.9; }

    /* ===== SCROLL REVEAL ===== */
    .reveal{ opacity:0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
    .reveal.in-view{ opacity:1; transform:none; }
    @media (prefers-reduced-motion: reduce){ *{ transition: none !important; animation-duration: 0.001ms !important; } .hero::before{ transition:none; } .reveal{ opacity:1; transform:none; } }

    /* ===== PRINT ===== */
    @media print{
      .topbar, .hero, .toolbar, .filters, .actions, .finder, footer{ display:none !important; }
      body{ background:#fff; color:#000; }
      .card{ break-inside: avoid; }
    }
  </style>
</head>
<body>
  <!-- ===== Top Navigation ===== -->
  <header class="topbar" role="banner">
    <div class="container nav" aria-label="Primary">
      <a class="brand" href="index.html#top" aria-label="Home">
        <img alt="Logo" src='https://i.imgur.com/XpO73I9.png' />
        <span>OSS</span>
      </a>

      <nav>
        <button class="burger" id="navToggle" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle navigation">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></svg>
        </button>

        <div id="navMenu" class="nav-links" role="menubar">
          <a class="nav-link" role="menuitem" href="index.html#hero">Home</a>
          <a class="nav-link" role="menuitem" href="index.html#events-head">Events</a>
          <div class="dropdown" data-dropdown aria-expanded="false">
            <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="menu-schedule">
              Schedule <span class="caret" aria-hidden="true"></span>
            </button>
            <div id="menu-schedule" class="dropdown-menu" role="menu" aria-label="Schedule submenu">
              <a role="menuitem" href="policies.html">Policies</a>
              <a role="menuitem" href="informations.html">Informations</a>
              <a role="menuitem" href="rules.html">Rules</a>
              <a role="menuitem" href="divisions.html" aria-current="page">Divisions</a>
            </div>
          </div>
          <a class="nav-link" role="menuitem" href="#footer">Contact</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <section class="hero" id="hero">
    <div class="hero-inner container reveal" data-animate="fade">
      <div class="eyebrow">Open Submission Series</div>
      <h1>Divisions</h1>
      <p class="lead">Skill tiers, age groups, and team formats—find the right competitive level for you.</p>
      <a class="btn" href="#divisions" role="button">Browse Divisions</a>
    </div>
  </section>

  <!-- ===== Intro ===== -->
  <section id="divisions">
    <div class="container section-head reveal" data-animate="fade-up">
      <div class="subtitle">– Divisions –</div>
      <h2 class="title">Choose your lane</h2>
      <p class="lead">These are the default OSS divisions. Availability may vary by event. See the event page for final offerings.</p>
    </div>

    <div class="container">
      <div class="toolbar">
        <label class="search" aria-label="Search divisions">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 001.48-4.23C15.91 6.01 13.4 3.5 10.41 3.5 7.42 3.5 4.91 6.01 4.91 9s2.51 5.5 5.5 5.5c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l4.25 4.25 1.27-1.27L15.5 14zm-5.09 0C8.01 14 6 11.99 6 9.59S8.01 5.18 10.41 5.18s4.41 2.01 4.41 4.41S12.8 14 10.41 14z"/></svg>
          <input id="q" type="search" placeholder="Search by name, tag, or notes…" autocomplete="off" />
        </label>
        <span class="count" id="resultCount" aria-live="polite"></span>
      </div>

      <div class="filters" id="typeFilters" aria-label="Filter by type"></div>
      <div class="filters" id="tagFilters" aria-label="Filter by tag"></div>

      <div class="grid" id="grid" aria-live="polite"></div>

      <!-- Finder & Compare -->
      <div class="finder">
        <!-- Division Finder -->
        <article class="card reveal" data-animate="fade-up">
          <header>
            <h3>Find my division</h3>
            <span class="pill">Helper</span>
          </header>
          <div class="body">
            <div class="form-row">
              <div class="field">
                <label for="age">Age</label>
                <input id="age" type="number" min="5" max="100" step="1" placeholder="e.g., 24" />
              </div>
              <div class="field">
                <label for="rating">Skill rating (1–10)</label>
                <input id="rating" type="number" min="1" max="10" step="0.1" placeholder="e.g., 6.5" />
              </div>
              <div class="field">
                <label for="team">Team format</label>
                <select id="team">
                  <option value="any">Any</option>
                  <option value="singles">Singles</option>
                  <option value="doubles">Doubles</option>
                </select>
              </div>
            </div>
            <button class="btn-ghost" id="runFinder" type="button">Suggest divisions</button>
            <div id="finderResults" class="meta" aria-live="polite"></div>
            <p class="note">This tool is a guideline. Final placement is determined by OSS officials and event‑specific rules.</p>
          </div>
        </article>

        <!-- Compare -->
        <article class="card reveal" data-animate="fade-up">
          <header>
            <h3>Compare selected</h3>
            <span class="pill warn" id="compareCount">0 selected</span>
          </header>
          <div class="body" style="overflow:auto;">
            <table class="compare-table" id="compareTable" aria-label="Division comparison">
              <thead>
                <tr>
                  <th>Division</th>
                  <th>Type</th>
                  <th>Skill</th>
                  <th>Age</th>
                  <th>Team</th>
                  <th>Gender</th>
                  <th>Roster</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody id="compareBody">
                <tr><td colspan="8" class="note">Use “Add to compare” on any card to build your table.</td></tr>
              </tbody>
            </table>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- ===== Footer ===== -->
  <footer id="footer">
    <div class="container footer-grid reveal" data-animate="fade-up">
      <div class="footer-col">
        <h4>About</h4>
        <p class="lead">OSS is ___. Our mission is to host fair, transparent competition across accessible divisions.</p>
      </div>
      <div class="footer-col">
        <h4>Links</h4>
        <a href="index.html#hero">Home</a>
        <a href="index.html#events-head">Events</a>
        <a href="#divisions">Divisions</a>
      </div>
      <div class="footer-col">
        <h4>Contact</h4>
        <a href="mailto:info@example.com" class="link">info@example.com</a>
        <span class="space-s"></span>
        <span class="pill">Mon–Sun · 9–5</span>
      </div>
    </div>
    <div class="container copyright">
      © <span id="year"></span> OSS. All rights reserved.
    </div>
  </footer>

  <script>
    /* ------------------------------
     * 1) MOBILE NAV TOGGLE
     * ------------------------------ */
    (function(){
      const toggle = document.getElementById('navToggle');
      const menu = document.getElementById('navMenu');
      if(!toggle || !menu) return;
      const closeMenu = () => {
        menu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        document.querySelectorAll('[data-dropdown].open').forEach(d => {
          d.classList.remove('open');
          d.setAttribute('aria-expanded','false');
          d.querySelector('.dropdown-toggle')?.setAttribute('aria-expanded','false');
        });
      };
      toggle.addEventListener('click', () => {
        const open = menu.classList.toggle('open');
        toggle.setAttribute('aria-expanded', String(open));
      });
      menu.addEventListener('click', (e) => {
        const isLink = e.target.closest('a.nav-link');
        if (isLink && window.matchMedia('(max-width: 820px)').matches) closeMenu();
      });
      document.addEventListener('click', (e) => {
        if (!menu.contains(e.target) && !toggle.contains(e.target)) {
          if (window.matchMedia('(max-width: 820px)').matches) closeMenu();
        }
      });
    })();

    /* ------------------------------
     * 2) ACCESSIBLE DROPDOWNS
     * ------------------------------ */
    ;(function(){
      const dropdowns = document.querySelectorAll('[data-dropdown]');
      const isMobile = () => window.matchMedia('(max-width: 820px)').matches;
      dropdowns.forEach(drop => {
        const btn = drop.querySelector('.dropdown-toggle');
        const menu = drop.querySelector('.dropdown-menu');
        const items = Array.from(menu.querySelectorAll('a'));
        function open(){ drop.classList.add('open'); drop.setAttribute('aria-expanded','true'); btn.setAttribute('aria-expanded','true'); if (isMobile()) menu.style.display = 'block'; }
        function close(){ drop.classList.remove('open'); drop.setAttribute('aria-expanded','false'); btn.setAttribute('aria-expanded','false'); if (isMobile()) menu.style.display = 'none'; }
        function toggle(){ (drop.classList.contains('open')) ? close() : open(); }
        btn.addEventListener('click', (e) => { e.preventDefault(); if (isMobile()){ document.querySelectorAll('[data-dropdown].open').forEach(d => { if(d!==drop) d.classList.remove('open'); }); } toggle(); });
        btn.addEventListener('keydown', (e) => { if (e.key === 'ArrowDown'){ e.preventDefault(); open(); items[0]?.focus(); } });
        menu.addEventListener('keydown', (e) => { const i = items.indexOf(document.activeElement); if (e.key === 'Escape'){ e.preventDefault(); close(); btn.focus(); } if (e.key === 'ArrowDown'){ e.preventDefault(); items[Math.min(i+1, items.length-1)]?.focus(); } if (e.key === 'ArrowUp'){ e.preventDefault(); items[Math.max(i-1, 0)]?.focus(); } if (e.key === 'Home'){ e.preventDefault(); items[0]?.focus(); } if (e.key === 'End'){ e.preventDefault(); items[items.length-1]?.focus(); } });
        document.addEventListener('click', (e) => { if (!drop.contains(e.target) && drop.classList.contains('open') && isMobile()){ close(); } });
        drop.addEventListener('focusout', (e) => { if (!drop.contains(e.relatedTarget) && !isMobile()){ close(); } });
      });
    })();

    /* ------------------------------
     * 3) SCROLL REVEAL
     * ------------------------------ */
    ;(function(){
      const items = document.querySelectorAll('.reveal');
      if ('IntersectionObserver' in window) {
        const io = new IntersectionObserver((entries) => {
          entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('in-view'); io.unobserve(entry.target); } });
        }, { threshold: 0.3 });
        items.forEach(el => io.observe(el));
      } else { items.forEach(el => el.classList.add('in-view')); }
    })();

    /* ------------------------------
     * 4) DIVISIONS DATA & RENDERING
     * ------------------------------ */
    const divisions = [
      { id:'open', name:'Open', type:'skill', ratingMin:8, ratingMax:10, ageMin:null, ageMax:null, team:'singles', gender:'open', roster:1, tags:['elite','seeding','competitive'], notes:'Highest competitive tier. Strong tournament history expected.' },
      { id:'advanced', name:'Advanced', type:'skill', ratingMin:6, ratingMax:8, ageMin:null, ageMax:null, team:'singles', gender:'open', roster:1, tags:['competitive'], notes:'Experienced players with strong fundamentals and prior event play.' },
      { id:'intermediate', name:'Intermediate', type:'skill', ratingMin:4, ratingMax:6, ageMin:null, ageMax:null, team:'singles', gender:'open', roster:1, tags:['development'], notes:'Players building consistency and event experience.' },
      { id:'beginner', name:'Beginner', type:'skill', ratingMin:1, ratingMax:4, ageMin:null, ageMax:null, team:'singles', gender:'open', roster:1, tags:['entry','first‑timers'], notes:'Introductory level; great for first events.' },
      { id:'youth-u12', name:'Youth U12', type:'age', ratingMin:1, ratingMax:10, ageMin:null, ageMax:12, team:'singles', gender:'open', roster:1, tags:['youth'], notes:'Players aged 11 and under on event day.' },
      { id:'youth-u16', name:'Youth U16', type:'age', ratingMin:1, ratingMax:10, ageMin:null, ageMax:16, team:'singles', gender:'open', roster:1, tags:['youth'], notes:'Players aged 15 and under on event day.' },
      { id:'masters-35', name:'Masters 35+', type:'age', ratingMin:1, ratingMax:10, ageMin:35, ageMax:null, team:'singles', gender:'open', roster:1, tags:['masters'], notes:'Players aged 35 or older on event day.' },
      { id:'womens-open', name:"Women’s Open", type:'skill', ratingMin:6, ratingMax:10, ageMin:null, ageMax:null, team:'singles', gender:'women', roster:1, tags:['gender'], notes:'Open division for women and femme‑identifying players.' },
      { id:'doubles-open', name:'Doubles Open', type:'team', ratingMin:6, ratingMax:10, ageMin:null, ageMax:null, team:'doubles', gender:'open', roster:2, tags:['team','seeding'], notes:'High‑level doubles. Partners may be assigned a combined seed.' },
      { id:'mixed-doubles', name:'Mixed Doubles', type:'team', ratingMin:4, ratingMax:10, ageMin:null, ageMax:null, team:'doubles', gender:'mixed', roster:2, tags:['team','mixed'], notes:'Mixed‑gender pairs. Some events may require M/F or posted equivalents.' }
    ];

    const compareSet = new Set();

    function typeLabel(t){ return t==='skill'?'Skill tier':t==='age'?'Age group':'Team format'; }
    function skillLabel(d){ return (d.ratingMin||1) + '–' + (d.ratingMax||10); }
    function ageLabel(d){ if(d.ageMin && d.ageMax) return d.ageMin+'–'+d.ageMax; if(d.ageMin) return d.ageMin+'+'; if(d.ageMax) return '≤'+d.ageMax; return 'Any'; }
    function titleCase(s){ return (s||'').replace(/\b\w/g, c=>c.toUpperCase()); }

    function mkPill(text, cls=''){ const span=document.createElement('span'); span.className='pill '+cls; span.textContent=text; return span; }

    function renderGrid(){
      const grid = document.getElementById('grid');
      const q = (document.getElementById('q').value||'').toLowerCase().trim();
      const typeSelected = new Set(Array.from(document.querySelectorAll('#typeFilters .filter[aria-pressed="true"]').values()).map(b=>b.dataset.value));
      const tagSelected = new Set(Array.from(document.querySelectorAll('#tagFilters .filter[aria-pressed="true"]').values()).map(b=>b.dataset.value));

      grid.innerHTML = '';
      let shown = 0;

      for(const d of divisions){
        const hay = (d.name+' '+d.type+' '+(d.tags||[]).join(' ')+' '+(d.notes||'')).toLowerCase();
        const okText = !q || hay.includes(q);
        const okType = typeSelected.size===0 || typeSelected.has(d.type);
        const okTags = tagSelected.size===0 || (d.tags||[]).some(t=>tagSelected.has(t));
        if(!(okText && okType && okTags)) continue;
        shown++;

        const card = document.createElement('article');
        card.className='card reveal';
        card.id = d.id;

        const head = document.createElement('header');
        const h3 = document.createElement('h3'); h3.textContent = d.name; head.appendChild(h3);
        const tagWrap = document.createElement('div'); tagWrap.className='tags';
        tagWrap.appendChild(mkPill(typeLabel(d.type)));
        (d.tags||[]).forEach(t=> tagWrap.appendChild(mkPill(t)) );
        head.appendChild(tagWrap);
        card.appendChild(head);

        const body = document.createElement('div'); body.className='body';
        const meta = document.createElement('div'); meta.className='meta';
        meta.innerHTML = `
          <div><strong>Skill:</strong> ${skillLabel(d)}</div>
          <div><strong>Age:</strong> ${ageLabel(d)}</div>
          <div><strong>Team:</strong> ${titleCase(d.team)}</div>
          <div><strong>Gender:</strong> ${titleCase(d.gender)}</div>
          <div><strong>Roster:</strong> ${d.roster}</div>
          <div><strong>ID check:</strong> Required at check‑in</div>
        `;
        body.appendChild(meta);
        const p = document.createElement('p'); p.textContent = d.notes; body.appendChild(p);
        card.appendChild(body);

        const actions = document.createElement('div'); actions.className='actions';
        const compareBtn = document.createElement('button'); compareBtn.type='button'; compareBtn.className='btn-ghost'; compareBtn.textContent = compareSet.has(d.id)?'Remove from compare':'Add to compare';
        compareBtn.addEventListener('click',()=>{ if(compareSet.has(d.id)) compareSet.delete(d.id); else compareSet.add(d.id); renderCompare(); compareBtn.textContent = compareSet.has(d.id)?'Remove from compare':'Add to compare'; });
        const linkBtn = document.createElement('a'); linkBtn.className='btn-ghost'; linkBtn.href = '#'+d.id; linkBtn.textContent = 'Link';
        const applyBtn = document.createElement('a'); applyBtn.className='btn'; applyBtn.href = 'index.html#events-tables'; applyBtn.textContent='See events';
        actions.appendChild(compareBtn); actions.appendChild(linkBtn); actions.appendChild(applyBtn);
        card.appendChild(actions);

        grid.appendChild(card);
      }

      document.getElementById('resultCount').textContent = shown + ' division' + (shown===1?'':'s') + ' shown';

      // scroll reveal for new cards
      document.querySelectorAll('.reveal').forEach(el=> el.classList.add('in-view'));

      // open hash target if present
      const targetId = location.hash.slice(1);
      if (targetId){
        const el = document.getElementById(targetId);
        if (el){ setTimeout(()=> el.scrollIntoView({ behavior:'smooth', block:'start' }), 50); }
      }
    }

    function renderTypeFilters(){
      const container = document.getElementById('typeFilters');
      container.innerHTML = '';
      const types = ['skill','age','team'];
      for(const t of types){
        const b = document.createElement('button');
        b.className='filter'; b.type='button'; b.dataset.value=t; b.setAttribute('aria-pressed','false'); b.textContent=typeLabel(t);
        b.addEventListener('click',()=>{ const on=b.getAttribute('aria-pressed')==='true'; b.setAttribute('aria-pressed', String(!on)); renderGrid(); });
        container.appendChild(b);
      }
    }

    function renderTagFilters(){
      const container = document.getElementById('tagFilters');
      const all = new Set(divisions.flatMap(d=>d.tags||[]));
      container.innerHTML = '';
      const priority = ['elite','competitive','development','entry','youth','masters','team','mixed','gender','seeding'];
      const ordered = [...new Set([...priority.filter(t=>all.has(t)), ...Array.from(all).sort()])];
      for(const tag of ordered){
        const b = document.createElement('button');
        b.className='filter'; b.type='button'; b.dataset.value=tag; b.setAttribute('aria-pressed','false'); b.textContent=tag;
        b.addEventListener('click',()=>{ const on=b.getAttribute('aria-pressed')==='true'; b.setAttribute('aria-pressed', String(!on)); renderGrid(); });
        container.appendChild(b);
      }
    }

    function renderCompare(){
      const tbody = document.getElementById('compareBody');
      const count = document.getElementById('compareCount');
      const chosen = divisions.filter(d=> compareSet.has(d.id));
      count.textContent = chosen.length + ' selected';
      tbody.innerHTML = '';
      if (chosen.length===0){ tbody.innerHTML = '<tr><td colspan="8" class="note">Use “Add to compare” on any card to build your table.</td></tr>'; return; }
      for(const d of chosen){
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><a class="link" href="#${d.id}">${d.name}</a></td>
          <td>${typeLabel(d.type)}</td>
          <td>${skillLabel(d)}</td>
          <td>${ageLabel(d)}</td>
          <td>${titleCase(d.team)}</td>
          <td>${titleCase(d.gender)}</td>
          <td>${d.roster}</td>
          <td>${d.notes}</td>
        `;
        tbody.appendChild(tr);
      }
    }

    function runFinder(){
      const age = Number(document.getElementById('age').value);
      const rating = Number(document.getElementById('rating').value);
      const team = document.getElementById('team').value;
      const out = document.getElementById('finderResults');
      const problems = [];
      if(Number.isNaN(age)) problems.push('Enter a valid age');
      if(Number.isNaN(rating)) problems.push('Enter a valid rating');
      if(problems.length){ out.innerHTML = '<span class="pill warn">' + problems.join(' · ') + '</span>'; return; }

      const eligible = divisions.filter(d => {
        const okAge = (d.ageMin==null || age>=d.ageMin) && (d.ageMax==null || age<=d.ageMax);
        const okSkill = rating>=d.ratingMin && rating<=d.ratingMax;
        const okTeam = (team==='any') || d.team===team;
        return okAge && okSkill && okTeam;
      });

      out.innerHTML = '';
      if(eligible.length===0){ out.innerHTML = '<span class="pill warn">No exact matches. Consider contacting OSS for placement guidance.</span>'; return; }

      for(const d of eligible){
        const row = document.createElement('div');
        row.innerHTML = `<strong>${d.name}</strong><br><span class="note">Skill ${skillLabel(d)} · Age ${ageLabel(d)} · ${titleCase(d.team)}, ${titleCase(d.gender)}</span>`;
        out.appendChild(row);
      }
    }

    // Wire up
    (function(){
      document.getElementById('year').textContent = new Date().getFullYear();
      document.getElementById('q').addEventListener('input', ()=>{ clearTimeout(window.__qT); window.__qT = setTimeout(renderGrid, 120); });
      renderTypeFilters();
      renderTagFilters();
      renderGrid();
      document.getElementById('runFinder').addEventListener('click', runFinder);

      // If opened with a hash, ensure we scroll after initial render
      const targetId = location.hash.slice(1);
      if (targetId){ const el = document.getElementById(targetId); if (el){ setTimeout(()=> el.scrollIntoView({ behavior:'smooth', block:'start' }), 150); } }
    })();
  </script>
</body>
</html>
