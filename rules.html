<!DOCTYPE html>
<html lang="en" id="top">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OSS – Rules</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Official OSS (Open Submission Series) competitive rules: formats, scoring, timing, equipment, penalties, tiebreakers, officials, and more." />
  <link rel="stylesheet" href="assets/style.css" />
  <script src="assets/config.js"></script>
  <script src="assets/components.js"></script>
</head>
<body>
  <!-- ===== Top Navigation ===== -->
  <header class="topbar" role="banner">
    <div class="container nav" aria-label="Primary">
      <a class="brand" href="index.html#top" aria-label="Home">
        <img alt="Logo" src='https://i.imgur.com/XpO73I9.png' />
        <span>OSS</span>
      </a>

      <nav>
        <button class="burger" id="navToggle" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle navigation">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></svg>
        </button>

        <div id="navMenu" class="nav-links" role="menubar">
          <a class="nav-link" role="menuitem" href="index.html#hero">Home</a>
          <a class="nav-link" role="menuitem" href="index.html#events-head">Events</a>

          <div class="dropdown" data-dropdown aria-expanded="false">
            <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="menu-schedule">
              Schedule <span class="caret" aria-hidden="true"></span>
            </button>
            <div id="menu-schedule" class="dropdown-menu" role="menu" aria-label="Schedule submenu">
              <a role="menuitem" href="policies.html">Policies</a>
              <a role="menuitem" href="informations.html">Informations</a>
              <a role="menuitem" href="rules.html" aria-current="page">Rules</a>
              <a role="menuitem" href="divisions.html">Divisions</a>
            </div>
          </div>

          <a class="nav-link" role="menuitem" href="#footer">Contact</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <section class="hero" id="hero">
    <div class="hero-inner container reveal" data-animate="fade">
      <div class="eyebrow">Open Submission Series</div>
      <h1>Rules</h1>
      <p class="lead">The authoritative OSS ruleset for competitive play. Clear, fair, and consistent across events.</p>
      <a class="btn" href="#rules" role="button">Browse Rules</a>
    </div>
  </section>

  <!-- ===== Intro / Tools ===== -->
  <section id="rules">
    <div class="container section-head reveal" data-animate="fade-up">
      <div class="subtitle">– Rules –</div>
      <h2 class="title">Official ruleset & quick reference</h2>
      <p class="lead">These rules apply unless an event page states a specific variation. Questions? Contact <a class="link" href="mailto:info@example.com">info@example.com</a>.</p>
    </div>

    <div class="container">
      <div class="rules-toolbar">
        <label class="search" aria-label="Search rules">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 001.48-4.23C15.91 6.01 13.4 3.5 10.41 3.5 7.42 3.5 4.91 6.01 4.91 9s2.51 5.5 5.5 5.5c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l4.25 4.25 1.27-1.27L15.5 14zm-5.09 0C8.01 14 6 11.99 6 9.59S8.01 5.18 10.41 5.18s4.41 2.01 4.41 4.41S12.8 14 10.41 14z"/></svg>
          <input id="ruleSearch" type="search" placeholder="Search by keyword (e.g., best-of, stalling, tiebreak)…" autocomplete="off" />
        </label>
        <div class="actions">
          <button class="action" id="expandAll" type="button" aria-expanded="false">Expand all</button>
          <button class="action" id="collapseAll" type="button">Collapse all</button>
          <span class="count" id="resultCount" aria-live="polite"></span>
        </div>
      </div>

      <div class="filters" id="tagFilters" aria-label="Filter by tag"></div>

      <!-- Quick reference table (edit as needed per sport/game) -->
      <article class="card reveal" data-animate="fade-up" style="margin-bottom:18px;">
        <header>
          <h3>Quick reference</h3>
          <span class="pill" id="versionBadge">Version v1.0 · Updated <span id="updatedDate"></span></span>
        </header>
        <div style="overflow:auto;">
          <table aria-label="Quick reference">
            <thead>
              <tr>
                <th>Topic</th>
                <th>Default</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Match format</td><td>Best‑of‑3</td><td>Finals may be Best‑of‑5</td></tr>
              <tr><td>Check‑in window</td><td>30 min before first match</td><td>10‑minute grace at match time</td></tr>
              <tr><td>Tiebreak</td><td>1 game to 7 / sudden death</td><td>Event‑specific variants allowed</td></tr>
              <tr><td>Timeouts</td><td>1 per match</td><td>60 seconds; no stacking</td></tr>
              <tr><td>Equipment checks</td><td>Random</td><td>Non‑compliance may forfeit</td></tr>
            </tbody>
          </table>
        </div>
      </article>

      <div class="rules" id="ruleList" aria-live="polite"></div>
    </div>
  </section>

  <!-- ===== Footer ===== -->
  <footer id="footer">
    <div class="container footer-grid reveal" data-animate="fade-up">
      <div class="footer-col">
        <h4>About</h4>
        <p class="lead">OSS is ___. Our mission is to run fair, transparent competitions with clear rules everyone understands.</p>
      </div>
      <div class="footer-col">
        <h4>Links</h4>
        <a href="index.html#hero">Home</a>
        <a href="index.html#events-head">Events</a>
        <a href="#rules">Rules</a>
      </div>
      <div class="footer-col">
        <h4>Contact</h4>
        <a href="mailto:info@example.com" class="link">info@example.com</a>
        <span class="space-s"></span>
        <span class="pill">Mon–Sun · 9–5</span>
      </div>
    </div>
    <div class="container copyright">
      © <span id="year"></span> OSS. All rights reserved.
    </div>
  </footer>

  <script>
    /* ------------------------------
     * 1) MOBILE NAV TOGGLE
     * ------------------------------ */
    (function(){
      const toggle = document.getElementById('navToggle');
      const menu = document.getElementById('navMenu');
      if(!toggle || !menu) return;
      const closeMenu = () => {
        menu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        document.querySelectorAll('[data-dropdown].open').forEach(d => {
          d.classList.remove('open');
          d.setAttribute('aria-expanded','false');
          d.querySelector('.dropdown-toggle')?.setAttribute('aria-expanded','false');
        });
      };
      toggle.addEventListener('click', () => {
        const open = menu.classList.toggle('open');
        toggle.setAttribute('aria-expanded', String(open));
      });
      menu.addEventListener('click', (e) => {
        const isLink = e.target.closest('a.nav-link');
        if (isLink && window.matchMedia('(max-width: 820px)').matches) closeMenu();
      });
      document.addEventListener('click', (e) => {
        if (!menu.contains(e.target) && !toggle.contains(e.target)) {
          if (window.matchMedia('(max-width: 820px)').matches) closeMenu();
        }
      });
    })();

    /* ------------------------------
     * 2) ACCESSIBLE DROPDOWNS
     * ------------------------------ */
    ;(function(){
      const dropdowns = document.querySelectorAll('[data-dropdown]');
      const isMobile = () => window.matchMedia('(max-width: 820px)').matches;
      dropdowns.forEach(drop => {
        const btn = drop.querySelector('.dropdown-toggle');
        const menu = drop.querySelector('.dropdown-menu');
        const items = Array.from(menu.querySelectorAll('a'));
        function open(){ drop.classList.add('open'); drop.setAttribute('aria-expanded','true'); btn.setAttribute('aria-expanded','true'); if (isMobile()) menu.style.display = 'block'; }
        function close(){ drop.classList.remove('open'); drop.setAttribute('aria-expanded','false'); btn.setAttribute('aria-expanded','false'); if (isMobile()) menu.style.display = 'none'; }
        function toggle(){ (drop.classList.contains('open')) ? close() : open(); }
        btn.addEventListener('click', (e) => { e.preventDefault(); if (isMobile()){ document.querySelectorAll('[data-dropdown].open').forEach(d => { if(d!==drop) d.classList.remove('open'); }); } toggle(); });
        btn.addEventListener('keydown', (e) => { if (e.key === 'ArrowDown'){ e.preventDefault(); open(); items[0]?.focus(); } });
        menu.addEventListener('keydown', (e) => { const i = items.indexOf(document.activeElement); if (e.key === 'Escape'){ e.preventDefault(); close(); btn.focus(); } if (e.key === 'ArrowDown'){ e.preventDefault(); items[Math.min(i+1, items.length-1)]?.focus(); } if (e.key === 'ArrowUp'){ e.preventDefault(); items[Math.max(i-1, 0)]?.focus(); } if (e.key === 'Home'){ e.preventDefault(); items[0]?.focus(); } if (e.key === 'End'){ e.preventDefault(); items[items.length-1]?.focus(); } });
        document.addEventListener('click', (e) => { if (!drop.contains(e.target) && drop.classList.contains('open') && isMobile()){ close(); } });
        drop.addEventListener('focusout', (e) => { if (!drop.contains(e.relatedTarget) && !isMobile()){ close(); } });
      });
    })();

    /* ------------------------------
     * 3) SCROLL REVEAL
     * ------------------------------ */
    ;(function(){
      const items = document.querySelectorAll('.reveal');
      if ('IntersectionObserver' in window) {
        const io = new IntersectionObserver((entries) => {
          entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('in-view'); io.unobserve(entry.target); } });
        }, { threshold: 0.3 });
        items.forEach(el => io.observe(el));
      } else { items.forEach(el => el.classList.add('in-view')); }
    })();

    /* ------------------------------
     * 4) RULES DATA & RENDERING
     * ------------------------------ */
    const rulesetVersion = 'v1.0';
    const lastUpdated = '2025-08-18';

    const rules = [
      {
        id: 'scope',
        title: 'Scope & Applicability',
        tags: ['overview'],
        summary: 'This ruleset governs all OSS events unless a page specifies a different format.',
        body: `
          <p>Where an event page conflicts with this ruleset, the event page prevails for that event only. Officials may adjust formats to maintain fair play or safety.</p>
        `
      },
      {
        id: 'formats-brackets',
        title: 'Formats & Brackets',
        tags: ['format','brackets'],
        summary: 'Default Best‑of‑3 with finals Best‑of‑5; brackets seeded by recent results and balance.',
        body: `
          <ul>
            <li><strong>Default:</strong> Best‑of‑3 for all rounds; finals may be Best‑of‑5.</li>
            <li><strong>Bracket style:</strong> Single‑elimination by default; double‑elimination may be used when posted.</li>
            <li><strong>Seeding:</strong> Based on recent OSS results, comparable events, and bracket integrity.</li>
            <li><strong>Late entrants:</strong> Placed at the bottom seeds at organizer discretion.</li>
          </ul>
        `
      },
      {
        id: 'match-structure',
        title: 'Match Structure',
        tags: ['matches','structure'],
        summary: 'Order of play, player obligations, and reporting results.',
        body: `
          <ul>
            <li>Players must be present and ready at the assigned station/court when called.</li>
            <li>Warm‑ups are limited to 3 minutes unless otherwise noted.</li>
            <li>Winners must report results to the desk immediately after the match.</li>
          </ul>
        `
      },
      {
        id: 'timing',
        title: 'Timing, Check‑in & No‑Shows',
        tags: ['timing','check-in'],
        summary: 'Arrive 30 minutes early; 10‑minute grace at match time; no‑shows may forfeit.',
        body: `
          <ul>
            <li>Check‑in opens 30 minutes before your first match.</li>
            <li>Failure to appear within 10 minutes of the scheduled time may result in a forfeit.</li>
            <li>Repeated lateness is grounds for disqualification.</li>
          </ul>
        `
      },
      {
        id: 'scoring',
        title: 'Scoring & Tiebreakers',
        tags: ['scoring','tiebreak'],
        summary: 'Default scoring and how to resolve ties.',
        body: `
          <ul>
            <li>Match winners are determined by the majority of games (e.g., 2 of 3).</li>
            <li><strong>Tiebreak:</strong> Single game to 7 points or a posted sudden‑death variant.</li>
            <li>In multi‑set formats, report scores set‑by‑set (e.g., 7‑5, 3‑6, 7‑6).</li>
          </ul>
        `
      },
      {
        id: 'timeouts-breaks',
        title: 'Timeouts & Breaks',
        tags: ['timeouts'],
        summary: 'One 60‑second timeout per match unless posted otherwise.',
        body: `
          <ul>
            <li>Timeouts cannot be taken consecutively to extend rest.</li>
            <li>Medical timeouts are at the official’s discretion.</li>
          </ul>
        `
      },
      {
        id: 'equipment',
        title: 'Equipment & Attire',
        tags: ['equipment','attire','safety'],
        summary: 'Approved equipment only; non‑compliant gear may result in penalties or forfeits.',
        body: `
          <ul>
            <li>Random equipment checks may occur at any time.</li>
            <li>Closed‑toe shoes required on the field of play where applicable.</li>
            <li>Prohibited items include any gear that provides an unfair advantage or violates venue policy.</li>
          </ul>
        `
      },
      {
        id: 'coaching',
        title: 'Coaching & Communication',
        tags: ['coaching','communication'],
        summary: 'Coaching is restricted during live play; allowed in breaks unless posted otherwise.',
        body: `
          <ul>
            <li>No coaching during points/rounds in progress.</li>
            <li>Coaching is permitted during designated breaks and between games unless prohibited by the event page.</li>
          </ul>
        `
      },
      {
        id: 'stalling',
        title: 'Pace of Play & Stalling',
        tags: ['pace','stalling'],
        summary: 'Deliberate delays are penalized; officials may issue timed warnings.',
        body: `
          <ul>
            <li>Keep a continuous pace of play; unnecessary delays can lead to penalties.</li>
            <li>Officials may use a visible timer or countdown where applicable.</li>
          </ul>
        `
      },
      {
        id: 'subs-withdrawals',
        title: 'Substitutions & Withdrawals',
        tags: ['subs','withdrawals'],
        summary: 'Once a match starts, substitutions are not permitted unless posted for team formats.',
        body: `
          <ul>
            <li>Withdrawals must be reported to the desk immediately; medical documentation may be requested.</li>
          </ul>
        `
      },
      {
        id: 'forfeits',
        title: 'Forfeits & Walkovers',
        tags: ['forfeits'],
        summary: 'Failure to appear or comply with rules can result in a walkover for the opponent.',
        body: `
          <ul>
            <li>Walkovers are recorded as a regulation win with score notation per event policy.</li>
          </ul>
        `
      },
      {
        id: 'officials',
        title: 'Officials, Judging & Video',
        tags: ['officials','judging'],
        summary: 'Officials have final authority; video may be consulted when available.',
        body: `
          <ul>
            <li>Respectful questions are allowed; argumentative behavior is penalized.</li>
            <li>In absence of replay, on‑field decisions stand.</li>
          </ul>
        `
      },
      {
        id: 'conduct',
        title: 'Player Conduct',
        tags: ['conduct'],
        summary: 'Sportsmanship is required; harassment, threats, or abuse are prohibited.',
        body: `
          <ul>
            <li>Follow staff instructions at all times.</li>
            <li>Alcohol or substance impairment while competing is prohibited.</li>
          </ul>
        `
      },
      {
        id: 'infractions-penalties',
        title: 'Infractions & Penalties',
        tags: ['penalties'],
        summary: 'Progressive discipline up to disqualification and event bans.',
        body: `
          <ul>
            <li>Examples: stalling, equipment tampering, unsportsmanlike conduct, cheating.</li>
            <li>Sanctions may include warning, game loss, match loss, removal from event, or suspension from future OSS events.</li>
          </ul>
        `
      },
      {
        id: 'devices-interference',
        title: 'Devices, Media & Interference',
        tags: ['devices','media'],
        summary: 'Personal recording is permitted if it does not disrupt play or others’ privacy.',
        body: `
          <ul>
            <li>No flash, obstructive tripods, or interference with officials/players.</li>
            <li>Streams must follow event desk guidance; OSS may designate feature matches.</li>
          </ul>
        `
      },
      {
        id: 'venue',
        title: 'Venue Rules',
        tags: ['venue','safety'],
        summary: 'Follow venue staff instructions and posted safety requirements.',
        body: `
          <ul>
            <li>Keep aisles clear and respect restricted areas.</li>
            <li>OSS/venue are not responsible for lost or stolen items.</li>
          </ul>
        `
      },
      {
        id: 'weather',
        title: 'Weather & Force Majeure',
        tags: ['weather','schedule'],
        summary: 'Schedules may change for safety; alternate formats or dates may be used.',
        body: `<p>Officials may delay, modify, or cancel play. Where possible, alternate formats will be offered; not guaranteed.</p>`
      },
      {
        id: 'appeals',
        title: 'Protests & Appeals',
        tags: ['appeals'],
        summary: 'File within 15 minutes of match end with a concise written summary.',
        body: `
          <ul>
            <li>Appeals are reviewed by the Head Official or Tournament Director; decisions are final.</li>
          </ul>
        `
      },
      {
        id: 'versioning',
        title: 'Versioning & Amendments',
        tags: ['versioning','overview'],
        summary: 'This is the current published version of the OSS ruleset.',
        body: `<p>Version <strong>${rulesetVersion}</strong> · Last updated <time datetime="${lastUpdated}">${lastUpdated}</time>. OSS may update rules at any time; changes take effect upon publication.</p>`
      }
    ];

    function formatDate(iso){
      const d = new Date(iso + 'T12:00:00');
      return Number.isNaN(d.getTime()) ? iso : new Intl.DateTimeFormat(undefined,{year:'numeric', month:'short', day:'2-digit'}).format(d);
    }

    function makeTagPill(tag){
      const span = document.createElement('span');
      span.className = 'pill';
      span.textContent = tag;
      return span;
    }

    function renderRules(){
      const list = document.getElementById('ruleList');
      const search = (document.getElementById('ruleSearch').value || '').trim().toLowerCase();
      const selected = new Set(Array.from(document.querySelectorAll('.filter[aria-pressed="true"]').values()).map(b => b.dataset.tag));
      list.innerHTML = '';
      let visible = 0;
      for (const r of rules){
        const hay = [r.title, r.summary, r.body, ...(r.tags||[])].join(' ').toLowerCase();
        const matchesText = !search || hay.includes(search);
        const matchesTags = selected.size === 0 || (r.tags||[]).some(t => selected.has(t));
        if (!matchesText || !matchesTags) continue;
        visible++;

        const details = document.createElement('details');
        details.className = 'rule';
        details.id = r.id;

        const summary = document.createElement('summary');
        const head = document.createElement('div'); head.className = 'rule-head';
        const title = document.createElement('h3'); title.className = 'rule-title'; title.textContent = r.title; head.appendChild(title);
        const tags = document.createElement('div'); tags.className = 'rule-tags'; (r.tags||[]).forEach(t => tags.appendChild(makeTagPill(t))); head.appendChild(tags);

        const actions = document.createElement('div'); actions.className = 'rule-actions';
        const linkBtn = document.createElement('button'); linkBtn.type='button'; linkBtn.className='icon-btn'; linkBtn.setAttribute('aria-label','Copy link');
        linkBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 12a5 5 0 015-5h4v2H8a3 3 0 100 6h4v2H8a5 5 0 01-5-5zm8-3h5a5 5 0 010 10h-5v-2h5a3 3 0 100-6h-5V9z"/></svg>';
        linkBtn.addEventListener('click', () => { const url = location.origin + location.pathname + '#' + r.id; navigator.clipboard?.writeText(url); linkBtn.textContent='Link copied'; setTimeout(()=> linkBtn.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 12a5 5 0 015-5h4v2H8a3 3 0 100 6h4v2H8a5 5 0 01-5-5zm8-3h5a5 5 0 010 10h-5v-2h5a3 3 0 100-6h-5V9z"/></svg>', 1200); });
        actions.appendChild(linkBtn);

        const dateBadge = document.createElement('span'); dateBadge.className='pill'; dateBadge.textContent = 'Updated ' + formatDate(lastUpdated);
        actions.appendChild(dateBadge);

        head.appendChild(actions);
        summary.appendChild(head);
        details.appendChild(summary);

        const body = document.createElement('div'); body.className = 'rule-body'; body.innerHTML = `<p class="note">Summary: ${r.summary}</p>` + r.body;
        details.appendChild(body);

        list.appendChild(details);
      }
      document.getElementById('resultCount').textContent = visible + ' rule' + (visible===1?'':'s') + ' shown';

      const targetId = location.hash.slice(1);
      if (targetId){
        const el = document.getElementById(targetId);
        if (el && el.tagName.toLowerCase()==='details'){
          el.open = true; setTimeout(()=> el.scrollIntoView({ behavior:'smooth', block:'start' }), 50);
        }
      }
    }

    function renderFilters(){
      const container = document.getElementById('tagFilters');
      const all = new Set(rules.flatMap(r => r.tags||[]));
      container.innerHTML = '';
      const mk = (tag) => {
        const b = document.createElement('button');
        b.className = 'filter'; b.type='button'; b.dataset.tag = tag; b.setAttribute('aria-pressed','false'); b.textContent = tag;
        b.addEventListener('click', () => { const on = b.getAttribute('aria-pressed')==='true'; b.setAttribute('aria-pressed', String(!on)); renderRules(); });
        return b;
      };
      const priority = ['format','matches','scoring','tiebreak','timeouts','equipment','conduct','penalties'];
      const ordered = [...new Set([...priority.filter(t => all.has(t)), ...Array.from(all).sort()])];
      ordered.forEach(tag => container.appendChild(mk(tag)));
    }

    (function(){
      let t; const input = document.getElementById('ruleSearch');
      input.addEventListener('input', () => { clearTimeout(t); t = setTimeout(renderRules, 150); });
      document.getElementById('expandAll').addEventListener('click', () => { document.querySelectorAll('#ruleList details.rule').forEach(d => d.open = true); });
      document.getElementById('collapseAll').addEventListener('click', () => { document.querySelectorAll('#ruleList details.rule').forEach(d => d.open = false); });
      window.addEventListener('beforeprint', () => { document.querySelectorAll('#ruleList details.rule').forEach(d => d.open = true); });
    })();

    // Init
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('updatedDate').textContent = new Intl.DateTimeFormat(undefined,{year:'numeric', month:'short', day:'2-digit'}).format(new Date(lastUpdated + 'T12:00:00'));
    document.getElementById('versionBadge').setAttribute('title', 'OSS Rules ' + rulesetVersion);
    renderFilters();
    renderRules();

    // Initialize components with page-specific content
    OSSComponents.initHeader('rules');
    OSSComponents.initFooter('OSS is a premier tournament organization. Our mission is to run fair, transparent competitions with clear rules everyone understands.');
  </script>
</body>
</html>
